<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reto 3A</title>
    <style>
      * {
        font-size: 1em;
        font-family: "Oswald";
      }
      body {
        background-color: rgb(61, 61, 61);
        margin: 0;
        padding: 0;
        min-height: 100vh;
        max-width: 100vw;
      }

      .cards-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
      }
      .card {
        font-family: 'Courier New', Courier, monospace;
        font-size: 2em;
        padding: 1em;
        border: solid 2px;
        border-radius: 5px;
        box-shadow: 5px 5px 0px black;
        background-color: white;
        display: none;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;

        min-width: 300px;
        height: 400px;
        box-sizing: border-box;
      }
      h1 {
        margin: 1em;
        text-align: center;
        font-size: 2em;
      }
      form {
        text-align: center;
        padding: 1em;
        margin: auto;
        margin-top: 3em;
        margin-bottom: 3em;
      }
      .boton {
        background-color: green;
        padding: 0.5em;
        border-radius: 5px;
        border: none;
        margin: 1em;
      }
    </style>
  </head>
  <body>
    <h1>STAR WARS</h1>
    <form novalidate>
      <div>
        <label for="id">ID:</label>
        <input
          id="id"
          type="text"
          placeholder="ej.21"
          required
          pattern="^\d{1,2}$"
        />
        <span class="error" id="error"></span>
      </div>
      <button id="enviar" class="boton">Enviar</button>
    </form>

    <div class="cards-container">
      <article class="card" id="personaje"></article>
    </div>
  </body>

  <script>

    //Paginacion de todos los datos
   const cargarDatos = async() =>{
    try{
        let response = await fetch("https://www.swapi.tech/api/people/");
        let paginas = response.total_pages;
    }catch (error){
        console.error("Datos no cargados");
    }

    for(let i = 1; i<=paginas; i++){
        response = await fetch(`https://www.swapi.tech/api/people?page=${i}&limit=10`)
        datos = await response.json()
        personajes.push(...datos.Search) //cambiar a results si falla
    }

    console.log("datos cargados")
    mostrarPersonajes()
}

const mostrarPersonajes = ()=>{
    let personajesDOM = document.getElementById("personajes");
    personajes.forEach( p=>{;
        personajeDOM.classList.add("card");
        personajeDOM.style.display="flex" //tengo que hacer esto porq no entiendo muy bien la estructura css
        personajeDOM.innerHTML = `<div>
    <p>Nombre -> ${personaje.result.properties.name}</p>
    <p>Altura -> ${personaje.result.properties.height}</p>
    <p>Masa -> ${personaje.result.properties.mass}</p>
    <p>Genero -> ${personaje.result.properties.gender}</p>
    </div>`;
    })
}
  </script>
</html>
